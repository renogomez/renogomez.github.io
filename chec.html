
<!DOCTYPE html>
<html>
<head>
	<title>CHEC Demo</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />

</head>
<!-- set width and height styles for map -->
<style>
#map {
    width: 1280px;
    height:500px;
}

#logo
{
    position: absolute;
    margin-left: 500px;
    margin-top: 20px;
}


/* css to customize Leaflet default styles  */
.custom .leaflet-popup-tip,
.custom .leaflet-popup-content-wrapper {
    background: #ffffff;
    color: #000000;
}
</style>


<body>
	<div id="map"></div>
	<div id="logo">
		<img src="https://www.chec.com.co/portals/0/skins/master/images/header/logo.png"/>
	</div>

	<script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
	<script>
		var map = new L.Map('map', {center: new L.LatLng(4.9833314,-75.6069347), zoom: 15});
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);

		var LeafIcon = L.Icon.extend({
			options: {
				iconSize:     [38, 40],
				iconAnchor:   [22, 94],
				popupAnchor:  [-3, -76]
			}
		});

		var greenIcon = new LeafIcon({iconUrl: 'docs/leaf-green.png'}),
			redIcon = new LeafIcon({iconUrl: 'docs/leaf-red.png'}),
			orangeIcon = new LeafIcon({iconUrl: 'docs/leaf-orange.png'});
		var towerIcon = new LeafIcon({iconUrl: 'docs/flag.ico'});
		//L.marker([4.9833314,-75.6069347], {icon: greenIcon}).bindPopup("I am a green leaf.").addTo(map);
		L.marker([51.495, -0.083], {icon: redIcon}).bindPopup("I am a red leaf.").addTo(map);
		L.marker([51.49, -0.1], {icon: orangeIcon}).bindPopup("I am an orange leaf.").addTo(map);

// create custom icon


    // create popup contents
    var customPopup = [
    	"Las torres están generando problemas ambientales.<br/><img src='https://www.qualcomm.com/sites/ember/files/powerlines_final.gif' alt='ambiente' width='350px'/>",
    	"Se presentan constantes cortocircuitos.<br/><img src='https://66.media.tumblr.com/6c3ff29e5e1687d0027c92f4274de0f0/tumblr_ncmow7lcxd1s5f7v4o1_1280.gif' alt='ruido' width='350px'/>",
    	"Grandes fluctuaciones en la corriente son un riesgo para dispositivos eléctricos en mi comunidad. <br/><img src='https://67.media.tumblr.com/9aad386e0e3e05cd36c2411d3e06e106/tumblr_nd1dxsp2Dv1r2geqjo1_500.gif' alt='ruido' width='350px'/>"
    ];

    // specify popup options 
    var customOptions =
        {
        'maxWidth': '500',
        'className' : 'custom'
        }
    var problems = [
		["1", 4.98755, -75.60645],
		["2", 4.9833314,-75.6069348],
		["3", 4.9827, -75.59971],
		];
	for (var i = 0; i < problems.length; i++) {
			marker = new L.marker([problems[i][1],problems[i][2]])
				.bindPopup(customPopup[i], customOptions)
				.on('click', markerOnClick)
				.addTo(map);

		}

		function markerOnClick(marker){
			
			marker.target.setIcon(towerIcon);
    		//marker.update();
		}
    // create marker object, pass custom icon as option, pass content and options to popup, add to map
    // L.marker([4.98755, -75.60645]).bindPopup(customPopup,customOptions).addTo(map);
    // L.marker([4.9833314,-75.6069348]).bindPopup(customPopup2,customOptions).addTo(map);
    // L.marker([4.9827, -75.59971]).bindPopup(customPopup3,customOptions).addTo(map);

    

//var marker = L.marker([4.9833314,-75.6069347]).addTo(map);

// Create an element to hold all your text and markup
// var container = $('<div />');

// // Delegate all event handling for the container itself and its contents to the container
// container.on('click', '.smallPolygonLink', function() {
//     alert("test");
// });

// // Insert whatever you want into the container, using whichever approach you prefer
// container.html("This is a link: <a href='#' class='smallPolygonLink'>Click me</a>.");
// container.append($('<span class="bold">').text(" :)"))

// // Insert the container into the popup
// marker.bindPopup(container[0]);


	</script>
</body>
</html>
